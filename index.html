<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>ol3-rotate-feature by ghettovoice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">ol3-rotate-feature</h1>
      <h2 class="project-tagline">Vector feature Rotate interaction for OpenLayers 3</h2>
      <a href="https://github.com/ghettovoice/ol3-rotate-feature" class="btn">View on GitHub</a>
      <a href="https://github.com/ghettovoice/ol3-rotate-feature/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ghettovoice/ol3-rotate-feature/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><a href="https://www.npmjs.org/package/ol3-rotate-feature"><img src="http://img.shields.io/npm/v/ol3-rotate-feature.svg" alt="view on npm"></a></p>

<h1>
<a id="rotate-feature-interaction-for-openlayers-3" class="anchor" href="#rotate-feature-interaction-for-openlayers-3" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Rotate feature interaction for OpenLayers 3</h1>

<p>Plugin adds interaction that allows to rotate vector features around some anchor.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Install it thought NPM:</p>

<div class="highlight highlight-source-shell"><pre>npm install ol3-rotate-feature</pre></div>

<p>Or download the latest version archive and add it with script tag:</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>ol3-rotate-feature/dist/bundle.min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Plugin is packed into UMD wrapper, import it with CommonJS or ES6:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> <span class="pl-smi">RotateFeatureInteraction</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>ol3-rotate-feature<span class="pl-pds">'</span></span>;
<span class="pl-k">const</span> <span class="pl-c1">RotateFeatureInteraction</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>ol3-rotate-feature<span class="pl-pds">'</span></span>);</pre></div>

<p>In Browser environment it is available as <code>ol.interaction.RotateFeature</code>.</p>

<h3>
<a id="options" class="anchor" href="#options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Options</h3>

<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">features</td>
<td align="left"><em>ol.Collection</em></td>
<td align="left">The features the interaction works on. Required.</td>
</tr>
<tr>
<td align="left">style</td>
<td align="left"><em>ol.style.Style | Array&lt;ol.style.Style&gt; | ol.style.StyleFunction | undefined</em></td>
<td align="left">Style of the overlay with interaction helper features.</td>
</tr>
<tr>
<td align="left">angle</td>
<td align="left"><em>number | undefined</em></td>
<td align="left">Initial angle in radians (positive is counter-clockwise), applied for features already added to collection. Default is <code>0</code>.</td>
</tr>
<tr>
<td align="left">anchor</td>
<td align="left"><em>number[] | ol.Coordinate | undefined</em></td>
<td align="left">Initial anchor coordinate. Default is center of features extent.</td>
</tr>
</tbody>
</table>

<h3>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Methods</h3>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// Set current angle of interaction features.</span>
<span class="pl-smi">RotateFeatureInteraction</span>.<span class="pl-c1">prototype</span>.<span class="pl-en">setAngle</span>(angle <span class="pl-k">:</span> number)</pre></div>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// Returns current angle of interaction features.</span>
<span class="pl-smi">RotateFeatureInteraction</span>.<span class="pl-c1">prototype</span>.<span class="pl-en">getAngle</span>() <span class="pl-k">:</span> number</pre></div>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// Set current anchor position.</span>
<span class="pl-smi">RotateFeatureInteraction</span>.<span class="pl-c1">prototype</span>.<span class="pl-en">setAnchor</span>(anchor<span class="pl-k">?</span> <span class="pl-k">:</span> number[] <span class="pl-k">|</span> <span class="pl-smi">ol</span>.<span class="pl-smi">Coordinate</span>)</pre></div>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// Returns current anchor position.</span>
<span class="pl-smi">RotateFeatureInteraction</span>.<span class="pl-c1">prototype</span>.<span class="pl-en">getAnchor</span>() <span class="pl-k">:</span> number[] <span class="pl-k">|</span> <span class="pl-smi">ol</span>.<span class="pl-smi">Coordinate</span> <span class="pl-k">|</span> <span class="pl-c1">undefined</span> </pre></div>

<h3>
<a id="events" class="anchor" href="#events" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Events</h3>

<p>All events triggered by the interaction are instances of <code>RotateFeatureEvent</code>.</p>

<h5>
<a id="members" class="anchor" href="#members" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Members</h5>

<ul>
<li>
<strong>features</strong>    <em>ol.Collection</em>     The features being rotated.</li>
<li>
<strong>angle</strong>       <em>number</em>            Current angle in radians.</li>
<li>
<strong>anchor</strong>      <em>ol.Coordinate</em>     Current anchor position.</li>
</ul>

<table>
<thead>
<tr>
<th align="left">Event</th>
<th align="left">Arguments</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">rotatestart</td>
<td align="left"><em>RotateFeatureEvent</em></td>
<td align="left">Triggered upon feature rotate start.</td>
</tr>
<tr>
<td align="left">rotating</td>
<td align="left"><em>RotateFeatureEvent</em></td>
<td align="left">Triggered upon feature rotating.</td>
</tr>
<tr>
<td align="left">rotateend</td>
<td align="left"><em>RotateFeatureEvent</em></td>
<td align="left">Triggered upon feature rotation end.</td>
</tr>
</tbody>
</table>

<h3>
<a id="example-usage" class="anchor" href="#example-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example usage:</h3>

<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> <span class="pl-smi">ol</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>openlayers<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span> <span class="pl-v">*</span> <span class="pl-k">as</span> <span class="pl-smi">ol3RotateFeature</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>ol3-rotate-feature<span class="pl-pds">'</span></span>;

<span class="pl-k">const</span> <span class="pl-c1">point</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ol.Feature</span>({
    name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>point<span class="pl-pds">'</span></span>,
    geometry<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">ol.geom.Point</span>([<span class="pl-c1">2384267.0573564973</span>, <span class="pl-c1">7557371.884852641</span>])
});
<span class="pl-k">const</span> <span class="pl-c1">line</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ol.Feature</span>({
    name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>line<span class="pl-pds">'</span></span>,
    geometry<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">ol.geom.LineString</span>([[<span class="pl-k">-</span><span class="pl-c1">603697.2100018249</span>, <span class="pl-k">-</span><span class="pl-c1">239432.60826165066</span>], [<span class="pl-c1">4190433.20404443</span>, <span class="pl-c1">2930563.8287811787</span>]])
});
<span class="pl-k">const</span> <span class="pl-c1">polygon</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ol.Feature</span>({
    name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>polygon<span class="pl-pds">'</span></span>,
    geometry<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">ol.geom.Polygon</span>([[[<span class="pl-k">-</span><span class="pl-c1">14482348.171434438</span>, <span class="pl-c1">6661491.741627443</span>], [<span class="pl-k">-</span><span class="pl-c1">9541458.663080638</span>, <span class="pl-c1">6221214.458704827</span>], [<span class="pl-k">-</span><span class="pl-c1">11473786.738129886</span>, <span class="pl-c1">3300708.4819848104</span>], [<span class="pl-k">-</span><span class="pl-c1">14482348.171434438</span>, <span class="pl-c1">6661491.741627443</span>]]])
});

<span class="pl-k">const</span> <span class="pl-c1">map</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ol.Map</span>({
    view<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">ol.View</span>({
        center<span class="pl-k">:</span> [<span class="pl-c1">0</span>, <span class="pl-c1">0</span>],
        zoom<span class="pl-k">:</span> <span class="pl-c1">2</span>
    }),
    layers<span class="pl-k">:</span> [
        <span class="pl-k">new</span> <span class="pl-en">ol.layer.Tile</span>({
            source<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">ol.source.MapQuest</span>({ layer<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>osm<span class="pl-pds">'</span></span> })
        }),
        <span class="pl-k">new</span> <span class="pl-en">ol.layer.Vector</span>({
            source<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">ol.source.Vector</span>({
                projection<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>EPSG:33857<span class="pl-pds">'</span></span>,
                features<span class="pl-k">:</span> [point, line, polygon]
            })
        })
    ],
    target<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>map<span class="pl-pds">'</span></span>,
    projection<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>EPSG:3857<span class="pl-pds">'</span></span>
});

<span class="pl-k">const</span> <span class="pl-c1">features</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ol.Collection</span>();
<span class="pl-k">const</span> <span class="pl-c1">select</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ol.interaction.Select</span>();
<span class="pl-k">const</span> <span class="pl-c1">rotate</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">ol.interaction.RotateFeature</span>({
    features<span class="pl-k">:</span> <span class="pl-smi">select</span>.<span class="pl-en">getFeatures</span>()
});

<span class="pl-smi">rotate</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>rotatestart<span class="pl-pds">'</span></span>, <span class="pl-smi">evt</span> <span class="pl-k">=&gt;</span> <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>rotate start<span class="pl-pds">'</span></span>, evt));
<span class="pl-smi">rotate</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>rotating<span class="pl-pds">'</span></span>, <span class="pl-smi">evt</span> <span class="pl-k">=&gt;</span> <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>rotating<span class="pl-pds">'</span></span>, evt));
<span class="pl-smi">rotate</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>rotateend<span class="pl-pds">'</span></span>, <span class="pl-smi">evt</span> <span class="pl-k">=&gt;</span> <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>rotate end<span class="pl-pds">'</span></span>, evt));

<span class="pl-smi">map</span>.<span class="pl-en">addInteraction</span>(select);
<span class="pl-smi">map</span>.<span class="pl-en">addInteraction</span>(rotate);</pre></div>

<p>Example of usage in Browser environment in <code>index.html</code>.</p>

<p>Getting total angle or last anchor coordinates after rotation:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">rotate</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">'</span>rotateend<span class="pl-pds">'</span></span>, <span class="pl-smi">evt</span> <span class="pl-k">=&gt;</span> {
    <span class="pl-c">// get total angle in degrees</span>
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-smi">evt</span>.<span class="pl-smi">angle</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> is <span class="pl-pds">'</span></span><span class="pl-k">+</span> (<span class="pl-k">-</span><span class="pl-c1">1</span> <span class="pl-k">*</span> <span class="pl-smi">evt</span>.<span class="pl-smi">angle</span> <span class="pl-k">*</span> <span class="pl-c1">180</span> <span class="pl-k">/</span> <span class="pl-c1">Math</span>.<span class="pl-c1">PI</span> ) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>°<span class="pl-pds">'</span></span>);
    <span class="pl-c">// get last anchor coordinates</span>
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-smi">evt</span>.<span class="pl-smi">anchor</span>);
});</pre></div>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>MIT (c) 2016, Vladimir Vershinin</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ghettovoice/ol3-rotate-feature">ol3-rotate-feature</a> is maintained by <a href="https://github.com/ghettovoice">ghettovoice</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
